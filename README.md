# Brotli extension for the HTML Webpack Plugin

[![npm version](https://badge.fury.io/js/html-webpack-brotli-plugin.svg)](http://badge.fury.io/js/html-webpack-brotli-plugin) [![Dependency Status](https://david-dm.org/jantimon/html-webpack-harddisk-plugin.svg)](https://david-dm.org/jantimon/html-webpack-brotli-plugin) [![Build status](https://travis-ci.org/jantimon/html-webpack-brotli-plugin.svg)](https://travis-ci.org/jantimon/html-webpack-brotli-plugin) [![js-semistandard-style](https://img.shields.io/badge/code%20style-semistandard-brightgreen.svg?style=flat-square)](https://github.com/Flet/semistandard)

Add .br suffix to index.html file's script that generated by html-webpack-plugin.

This is an extension plugin for the [webpack](http://webpack.github.io) plugin [html-webpack-plugin](https://github.com/ampedandwired/html-webpack-plugin) - a plugin that simplifies the creation of HTML files to serve your webpack bundles.

- [Brotli extension for the HTML Webpack Plugin](#brotli-extension-for-the-html-webpack-plugin)
  - [Installation](#installation)
  - [Basic Usage](#basic-usage)

## Installation

Install the plugin with npm:

```shell
$ npm install --save-dev html-webpack-brotli-plugin
```

## Basic Usage

Require the plugin in your webpack config:

```javascript
var HtmlWebpackBrotliPlugin = require("html-webpack-brotli-plugin");
```

Add the plugin to your webpack config as follows:

```javascript
plugins: [
  new HtmlWebpackPlugin(),
  new BrotliPlugin({
    asset: "[path].br[query]",
    test: /\.(js|css|html|svg)$/,
    threshold: 10240,
    minRatio: 0.8
  }), // brotli plugin will generate the xxx.js.br file
  new HtmlWebpackBrotliPlugin()
];
```

The above configuration will actually do nothing due to the configuration defaults.

As soon as you set `addBrotliExtension` to `true`, the file name of the index.html's script tag will always be added .br suffix. Eg: xxx.js.br This is very useful if you are using [brotli-webpack-plugin](https://github.com/mynameiswhm/brotli-webpack-plugin).

```javascript
plugins: [
  new HtmlWebpackPlugin({
    addBrotliExtension: true
  }),
  new BrotliPlugin({
    asset: "[path].br[query]",
    test: /\.(js|css|html|svg)$/,
    threshold: 10240,
    minRatio: 0.8
  }), // brotli plugin will generate the xxx.js.br file
  new HtmlWebpackBrotliPlugin()
];
```

Even if you generate multiple files make sure that you add the HtmlWebpackBrotliPlugin **only once**:

```javascript
plugins: [
  new HtmlWebpackPlugin({
    addBrotliExtension: true
  }),
  new HtmlWebpackPlugin({
    addBrotliExtension: true,
    filename: "demo.html"
  }),
  new HtmlWebpackPlugin({
    addBrotliExtension: false,
    filename: "test.html"
  }),
  new BrotliPlugin({
    asset: "[path].br[query]",
    test: /\.(js|css|html|svg)$/,
    threshold: 10240,
    minRatio: 0.8
  }), // brotli plugin will generate the xxx.js.br file
  new HtmlWebpackBrotliPlugin()
];
```
